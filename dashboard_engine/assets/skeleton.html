<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title }}</title>
    
    {% for csv in datasets %}
    <script id="dataset-{{ loop.index0 }}" type="text/csv">
{{ csv }}
    </script>
    {% endfor %}

    <script id="dashboard-config" type="application/json">
        {{ config_json | safe }}
    </script>

    <style>
        {{ css_content | safe }}
    </style>
</head>
<body>

    {% if include_dev_markup %}
    <div id="dev-zone" style="display: none;">
        <strong>ðŸ”§ MODE DÃ‰VELOPPEUR</strong>
        <span>&nbsp;Chargez un CSV local pour surcharger le Dataset 0.</span>
        <input type="file" id="dev-file-input" accept=".csv" />
    </div>
    {% endif %}

    <header>
        <div>
            <h1>{{ title }}</h1>
            {% if subtitle %}<p class="hint">{{ subtitle }}</p>{% endif %}
        </div>
        <button id="btn-export" class="btn-secondary">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:5px">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            TÃ©lÃ©charger les donnÃ©es
        </button>
    </header>

    <main id="dashboard-container">
        </main>

    <script type="module">
        {{ js_content | safe }}
    </script>
</body>
</html>